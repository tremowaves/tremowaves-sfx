var FastBase64={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encLookup:[],Init:function(){for(var i=0;i<4096;i++){this.encLookup[i]=this.chars[i>>6]+this.chars[i&63]}},Encode:function(src){var len=src.length;var dst="";var i=0;while(len>2){n=src[i]<<16|src[i+1]<<8|src[i+2];dst+=this.encLookup[n>>12]+this.encLookup[n&4095];len-=3;i+=3}if(len>0){var n1=(src[i]&252)>>2;var n2=(src[i]&3)<<4;if(len>1)n2|=(src[++i]&240)>>4;dst+=this.chars[n1];dst+=this.chars[n2];if(len==2){var n3=(src[i++]&15)<<2;n3|=(src[i]&192)>>6;dst+=this.chars[n3]}if(len==1)dst+="=";dst+="="}return dst}};FastBase64.Init();var RIFFWAVE=function(data){this.data=[];this.wav=[];this.dataURI="";this.header={chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:8e3,byteRate:0,blockAlign:0,bitsPerSample:8,subChunk2Id:[100,97,116,97],subChunk2Size:0};function u32ToArray(i){return[i&255,i>>8&255,i>>16&255,i>>24&255]}function u16ToArray(i){return[i&255,i>>8&255]}function split16bitArray(data){var r=[];var j=0;var len=data.length;for(var i=0;i<len;i++){r[j++]=data[i]&255;r[j++]=data[i]>>8&255}return r}this.Make=function(data){if(data instanceof Array)this.data=data;this.header.byteRate=this.header.sampleRate*this.header.numChannels*this.header.bitsPerSample>>3;this.header.blockAlign=this.header.numChannels*this.header.bitsPerSample>>3;this.header.subChunk2Size=this.data.length;this.header.chunkSize=36+this.header.subChunk2Size;this.wav=this.header.chunkId.concat(u32ToArray(this.header.chunkSize),this.header.format,this.header.subChunk1Id,u32ToArray(this.header.subChunk1Size),u16ToArray(this.header.audioFormat),u16ToArray(this.header.numChannels),u32ToArray(this.header.sampleRate),u32ToArray(this.header.byteRate),u16ToArray(this.header.blockAlign),u16ToArray(this.header.bitsPerSample),this.header.subChunk2Id,u32ToArray(this.header.subChunk2Size),this.data);this.dataURI="data:audio/wav;base64,"+FastBase64.Encode(this.wav)};if(data instanceof Array)this.Make(data)};(function(root,factory){if(typeof define==="function"&&define.amd){define([],(function(){return root.RIFFWAVE=factory()}))}else if(typeof module==="object"&&module.exports){module.exports=root.RIFFWAVE=factory()}else{root.RIFFWAVE=factory()}})(this,(function(){return RIFFWAVE}));